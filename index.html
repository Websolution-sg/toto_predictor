<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Singapore TOTO Predictor</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font: 16px/1.5 Arial; padding: 20px; max-width: 600px; margin: auto; }
    select, button, input { font-size: 1em; margin: 0.5em 0; }
    canvas { max-width: 100%; }
  </style>
</head>
<body>
  <h1>Singapore TOTO Predictor</h1>
  <p>RECENT RESULT: 7,8,17,29,32,42(1)</p>
  <p>By default, the previous lottery result is selected:</p>
  <div>
    <select id="base1"></select>
    <select id="base2"></select>
    <select id="base3"></select>
    <select id="base4"></select>
    <select id="base5"></select>
    <select id="base6"></select>
  </div>
 
  <div>
    <p>Additional Number</p>
    <select id="additional"></select>
  </div>
  
  <p>Select draw range:</p>
  <select id="drawRange">
    <option value="20">Last 20</option>
    <option value="50">Last 50</option>
    <option value="100">Last 100</option>
  </select>

  <label>
    <input type="checkbox" id="includeAdd"/> Include additional number
  </label>

  <button onclick="predict()">Predict</button>

  <h2>Results</h2>
  <div id="results"></div>
  <canvas id="freqChart"></canvas>

<script>
const historical = [
  // Replace with real Singapore TOTO data: 6 winning + 1 additional
  [7,8,17,29,32,42,1],
  [2,8,19,29,38,41,20],
  [12,21,26,27,35,44,10],
  [10,15,17,33,36,45,34],
  [6,15,16,17,25,34,31],
  [11,27,31,33,34,36,13],
  [10,26,28,35,37,46,20],
  [2,15,29,37,45,49,24],
  [1,10,37,40,45,47,19],
  [5,18,27,32,48,49,21],
  [3,7,38,41,44,49,20],
  [7,10,11,21,32,48,27],
  [2,5,25,26,29,30.42],
  [10,19,21,22,28,31,34],
  [1,5,7,11,19,47,44],
  [5,9,15,28,46,48,8],
  [3,10,32,34,44,48,29],
  [2,15,17,18,39,45,26],
  [9,16,17,20,34,38,18],
  [6,16,20,23,40,48,45],
  /* ... */
];

// Populate selects
for(let i=1;i<=49;i++){
  ['base1','base2','base3','base4','base5','base6','additional'].forEach(id => {
    const opt = document.createElement('option');
    opt.value=opt.textContent=i;
    document.getElementById(id).append(opt);
  });
}
// Auto-select most recent result
const recent = historical[0];
['base1','base2','base3','base4','base5','base6'].forEach((id, idx) => {
  document.getElementById(id).value = recent[idx];
});
document.getElementById('additional').value = recent[6];
  
// Prediction logic
function predict(){
  const bases = ['base1','base2','base3','base4','base5','base6'].map(id => +document.getElementById(id).value);
  const range = document.getElementById('drawRange').value;
  const includeAdd = document.getElementById('includeAdd').checked;
  const additional = document.getElementById('additional').value;

  const draws = (range === 'all') ? historical : historical.slice(-range);
  const freq = Array(50).fill(0);
  const compat = Array(50).fill(0);

  draws.forEach(draw => {
    const main = draw.slice(0,6);
    const add = draw[6];
    const pool = includeAdd ? main.concat(add) : main;
    pool.forEach(n => freq[n]++);
    bases.forEach(b => {
      if(pool.includes(b)){
        pool.filter(n => n!==b).forEach(n=> compat[n]++);
      }
    });
  });

  const suggestions = freq
    .map((count,n)=>({n,count,compat:compat[n]}))
    .filter(o=>o.n && !bases.includes(o.n))
    .sort((a,b)=> (b.compat + b.count) - (a.compat + a.count))
    .slice(0,6);

  const rs = document.getElementById('results');
  rs.innerHTML = '<h3>Suggested next numbers:</h3>' +
                 suggestions.map(o=>`<p>${o.n} (freq:${o.count}, compat:${o.compat})</p>`).join('');

  // Chart
  const ctx = document.getElementById('freqChart').getContext('2d');
  new Chart(ctx, {
    type:'bar',
    data:{
      labels: suggestions.map(o=>o.n),
      datasets:[{label:'Score',data:suggestions.map(o=>o.count+o.compat)}]
    },
    options:{scales:{y:{beginAtZero:true}}}
  });
}
</script>
</body>
</html>
